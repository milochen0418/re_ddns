// /etc/bind/named.conf  –  Main BIND9 configuration for re_ddns Docker
// ─────────────────────────────────────────────────────────────────────

// Access-control: allow queries from any, updates only from localhost
acl "trusted" {
    127.0.0.0/8;
    172.16.0.0/12;   // Docker networks
    192.168.0.0/16;
    10.0.0.0/8;
};

options {
    directory "/var/cache/bind";

    // Listen on all interfaces
    listen-on    { any; };
    listen-on-v6 { any; };

    // Allow queries from anywhere (this is a DDNS server)
    allow-query { any; };

    // Disable recursion – this is authoritative only
    recursion no;

    // DNSSEC validation (off for simplicity; turn on in production)
    dnssec-validation no;

    // Disable version exposure
    version "not disclosed";

    // Logging
    querylog no;
};

// ── Logging ──
logging {
    channel default_log {
        file "/var/log/bind/named.log" versions 3 size 5m;
        severity info;
        print-time yes;
        print-category yes;
        print-severity yes;
    };
    channel update_log {
        file "/var/log/bind/update.log" versions 3 size 5m;
        severity debug;
        print-time yes;
        print-category yes;
        print-severity yes;
    };
    category default { default_log; };
    category update { update_log; };
    category update-security { update_log; };
};

// ── Include TSIG keys and zone declarations ──
include "/etc/bind/named.conf.local";
